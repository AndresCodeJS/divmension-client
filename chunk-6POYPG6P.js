import{a as O}from"./chunk-WKURYVE6.js";import{b as U,e as A}from"./chunk-MA5SRXVH.js";import{$a as q,Ba as z,Ja as d,La as h,Na as I,Oa as T,Pa as u,Qa as Q,Ra as B,Sa as o,T as b,Ta as s,Tb as G,Ua as c,Va as x,Wa as f,X as g,Xa as a,Ya as K,Za as H,_a as $,ab as m,bb as v,cb as S,da as C,ea as _,fa as w,ga as P,hb as k,jb as V,la as j,oa as F,ua as E,xa as r,ya as y}from"./chunk-362D2ZQM.js";function W(t,l){if(t&1&&(w(),o(0,"svg",2),c(1,"path",3),s()),t&2){let e=a();T("",e.size," ",e.color,"")}}function X(t,l){if(t&1&&(w(),o(0,"svg",4),c(1,"path",3),s()),t&2){let e=a();T("",e.size," ",e.color,"")}}var Z=(()=>{class t{color="";size="";isFilled=!1;static \u0275fac=function(n){return new(n||t)};static \u0275cmp=g({type:t,selectors:[["app-like-heart"]],inputs:{color:"color",size:"size",isFilled:"isFilled"},standalone:!0,features:[k],decls:2,vars:1,consts:[["xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 24 24","stroke-width","1","stroke","currentColor",3,"class"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1","stroke","currentColor",3,"class"],["xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 24 24","stroke-width","1","stroke","currentColor"],["stroke-linecap","round","stroke-linejoin","round","d","M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12Z"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1","stroke","currentColor"]],template:function(n,i){n&1&&d(0,W,2,4,":svg:svg",0)(1,X,2,4,":svg:svg",1),n&2&&u(i.isFilled?0:1)}})}return t})();var J=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275cmp=g({type:t,selectors:[["app-loading-spinner"]],standalone:!0,features:[k],decls:3,vars:0,consts:[["aria-hidden","true","viewBox","0 0 100 101","fill","none","xmlns","http://www.w3.org/2000/svg",1,"inline","w-4","h-4","text-gray-dark","animate-spin","dark:text-gray-600","fill-gray-heavy"],["d","M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z","fill","currentColor"],["d","M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z","fill","currentFill"]],template:function(n,i){n&1&&(w(),o(0,"svg",0),c(1,"path",1)(2,"path",2),s())}})}return t})();function N(t){let e=Date.now()-t*1e3,n=Math.floor(e/(1e3*60*60*24*7));if(n>=1)return`${n} w`;let i=Math.floor(e/(1e3*60*60*24));if(i>=1)return`${i} d`;let p=Math.floor(e/(1e3*60*60));if(p>=1)return`${p} h`;let D=Math.floor(e/(1e3*60));if(D>=1)return`${D} min`;let M=Math.floor(e/1e3);return M>=0?`${M} s`:""}var Y=["commentInput"],ee=(t,l)=>l.commentId,L=t=>["/user/profile",t];function te(t,l){if(t&1){let e=x();o(0,"button",27),f("click",function(){C(e);let i=a(2);return _(i.unLike())}),c(1,"app-like-heart",13),s()}t&2&&(r(),h("isFilled",!0)("color","text-orange")("size","size-6"))}function ie(t,l){if(t&1){let e=x();o(0,"button",27),f("click",function(){C(e);let i=a(2);return _(i.like())}),c(1,"app-like-heart",13),s()}t&2&&(r(),h("isFilled",!1)("color","text-gray-heavy")("size","size-6"))}function ne(t,l){if(t&1&&d(0,te,2,3,"button")(1,ie,2,3,"button"),t&2){let e=a();u(e.post.isLiked?0:1)}}function oe(t,l){t&1&&c(0,"app-like-heart",13),t&2&&h("isFilled",!1)("color","text-gray-heavy")("size","size-6")}function se(t,l){if(t&1){let e=x();o(0,"pre",28),m(1),s(),o(2,"p",29),f("click",function(){C(e);let i=a();return _(i.showMoreDescription())}),m(3," ... Show less "),s()}if(t&2){let e=a();r(),v(e.post.description)}}function re(t,l){if(t&1){let e=x();o(0,"pre",28),m(1),s(),o(2,"span",27),f("click",function(){C(e);let i=a();return _(i.showMoreDescription())}),m(3,"... Show more"),s()}if(t&2){let e=a();r(),v(e.post.shortDescription),r(),I("flex justify-end font-normal text-xs w-11/12 text-gray-hover cursor-pointer ",e.post.description.length>78?"":"hidden","")}}function le(t,l){if(t&1){let e=x();o(0,"div",23)(1,"div",30)(2,"div",31),f("click",function(){C(e);let i=a();return _(i.closePostDetails())}),c(3,"img",32),s(),o(4,"div",33)(5,"div",34)(6,"p",35),f("click",function(){C(e);let i=a();return _(i.closePostDetails())}),m(7),s(),o(8,"p",36),m(9),s()(),o(10,"pre",28),m(11),s()()()()}if(t&2){let e=l.$implicit,n=a();r(2),h("routerLink",V(6,L,e.user)),r(),h("src",e.imageUrl||"https://divmension-12e561930bc7.s3.amazonaws.com/images/sin-perfil.jpg",E),r(3),h("routerLink",V(8,L,e.user)),r(),S(" ",e.user," "),r(2),S(" ",n.fixedDate(e.timeStamp)?n.fixedDate(e.timeStamp)+" Ago":""," "),r(2),v(e.content)}}function ae(t,l){t&1&&c(0,"app-loading-spinner",24)}function me(t,l){t&1&&(o(0,"p"),m(1,"Show comments..."),s())}function ce(t,l){t&1&&(o(0,"p"),m(1,"Show more comments..."),s())}function pe(t,l){if(t&1&&d(0,me,2,0,"p")(1,ce,2,0,"p"),t&2){let e=a();u(e.showCommentsButton?0:e.lastCommentKey.pk?1:-1)}}function de(t,l){t&1&&(o(0,"small"),m(1,"*Comments can't be longer than 100"),s())}function ue(t,l){t&1&&c(0,"app-loading-spinner")}function fe(t,l){t&1&&(o(0,"p"),m(1,"Post"),s())}function Ce(t,l){if(t&1){let e=x();o(0,"div",37,0),f("input",function(){C(e);let i=a();return _(i.onInput())})("keydown",function(i){C(e);let p=a();return _(p.onKeyDown(i))}),s(),o(2,"div",38)(3,"div",39),d(4,de,2,0,"small"),s(),o(5,"button",40),f("click",function(){C(e);let i=a();return _(i.postComment())}),d(6,ue,1,0,"app-loading-spinner")(7,fe,2,0,"p"),s()()}if(t&2){let e=a();r(4),u(e.errorLength?4:-1),r(),I("button-full mt-2 w-20 ",e.content.trim()?"":"hover:bg-black",""),h("disabled",!e.content.trim()),r(),u(e.loadingPostComment?6:7)}}var Le=(()=>{class t{route;renderer;el;constructor(e,n,i){this.route=e,this.renderer=n,this.el=i,this.renderer.listen("document","click",p=>{this.onDocumentClick(p)})}post={username:"",postId:"",imageUrl:"",description:"",timeStamp:0,likesQuantity:0,commentsQuantity:0,isLiked:!1,initialCommentsQuantity:0};fixedDate=N;closePostDetailsEmitter=new j;isPostCardOpen=!1;onDocumentClick(e){!this.el.nativeElement?.contains(e.target)&&this.isPostCardOpen&&(this.closePostDetailsEmitter.emit(!0),this.store.user().username&&(this.commentInput.nativeElement.innerHTML=""),this.queriedComments=!1,this.content="",this.errorLength=!1,this.comments=[],this.lastCommentKey={pk:"",sk:"none"},this.isClicked=!1)}closePostDetails(){this.closePostDetailsEmitter.emit(!0),this.store.user().username&&(this.commentInput.nativeElement.innerHTML=""),this.queriedComments=!1,this.content="",this.errorLength=!1,this.comments=[],this.lastCommentKey={pk:"",sk:"none"},this.isClicked=!1}commentInput;content="";ngAfterViewInit(){this.focusInput()}lastContent="";onInput(){this.content=this.commentInput.nativeElement.textContent}onKeyDown(e){this.errorLength=!1,e.key=="Enter"&&(e.preventDefault(),this.postComment(),this.commentInput.nativeElement.innerHTML="")}errorLength=!1;loadingPostComment=!1;store=b(G);queriedComments=!1;postComment(){if(this.content.length>100){this.errorLength=!0;return}this.loadingPostComment=!0,this.postService.postComment(this.post.postId,this.content).subscribe({next:e=>{this.post.commentsQuantity++;let n=this.store.user(),i={commentId:e.commentId,user:n.username,imageUrl:n.photoUrl,content:this.content,timeStamp:e.currentTimestamp};this.comments.unshift(i),!this.queriedComments&&this.post.initialCommentsQuantity>0&&(this.lastCommentKey={pk:`${this.post.postId}#comment`,sk:e.commentId}),this.content="",this.commentInput.nativeElement.innerHTML="",this.commentInput.nativeElement.blur(),this.loadingPostComment=!1},error:e=>{console.log(e),this.loadingPostComment=!1}})}focusInput(){this.store.user().username&&this.commentInput.nativeElement.focus()}showCommentsButton=!1;loadingComments=!1;lastCommentKey={pk:"",sk:"none"};comments=[];isClicked=!1;onCommentIcon(){!this.isClicked&&this.post.initialCommentsQuantity>0&&(this.showComments(),this.isClicked=!0)}showComments(){this.loadingComments=!0,this.postService.getComments(this.post.postId,this.lastCommentKey).subscribe({next:e=>{e.lastEvaluatedKey?this.lastCommentKey=e.lastEvaluatedKey:this.lastCommentKey={pk:"",sk:"none"},e.comments.length&&(this.comments=this.comments.concat(e.comments)),this.showCommentsButton=!1,this.loadingComments=!1,this.queriedComments=!0},error:e=>{console.log(e),this.loadingComments=!1}})}subscription;postService=b(O);moreDescription=!1;showMoreDescription(){this.moreDescription=!this.moreDescription}like(){this.postService.likePost(this.post.postId).subscribe({next:e=>{this.post.isLiked=!0,this.post.likesQuantity++},error:e=>{console.log(e)}})}unLike(){this.postService.unLikePost(this.post.postId).subscribe({next:e=>{this.post.isLiked=!1,this.post.likesQuantity--},error:e=>{console.log(e)}})}static \u0275fac=function(n){return new(n||t)(y(U),y(z),y(F))};static \u0275cmp=g({type:t,selectors:[["app-post-view"]],viewQuery:function(n,i){if(n&1&&H(Y,5),n&2){let p;$(p=q())&&(i.commentInput=p.first)}},inputs:{post:"post",isPostCardOpen:"isPostCardOpen",showCommentsButton:"showCommentsButton"},outputs:{closePostDetailsEmitter:"closePostDetailsEmitter"},standalone:!0,features:[k],decls:38,vars:13,consts:[["commentInput",""],[1,"flex","w-full","rounded-lg","pb-20"],[1,"flex","flex-col","justify-between","w-full"],[1,"relative","flex","flex-col","bg-gray-light","p-1","pb-16","rounded-lg"],[1,"button-full","flex","justify-center","items-center","absolute","top-2","left-3","w-7","h-7","sm:hidden",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"size-10"],["stroke-linecap","round","stroke-linejoin","round","d","M9 15 3 9m0 0 6-6M3 9h12a6 6 0 0 1 0 12h-3"],[1,"aspect-square","w-full","overflow-hidden","rounded-t-lg"],["alt","Logo",1,"object-cover","w-full","h-full","shadow-lg",3,"src"],[1,"flex","flex-col","text-gray-heavy","mt-5","px-4","sm:px-10","pb-10"],[1,"flex","gap-2","mt-2","mb-4","justify-between"],[1,"flex"],[1,"flex","gap-1"],[3,"isFilled","color","size"],[1,"text-gray-heavy"],[1,"flex","gap-1","ml-3","cursor-pointer",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1","stroke","currentColor",1,"size-6","text-gray-heavy"],["stroke-linecap","round","stroke-linejoin","round","d","M12 20.25c4.97 0 9-3.694 9-8.25s-4.03-8.25-9-8.25S3 7.444 3 12c0 2.104.859 4.023 2.273 5.48.432.447.74 1.04.586 1.641a4.483 4.483 0 0 1-.923 1.785A5.969 5.969 0 0 0 6 21c1.282 0 2.47-.402 3.445-1.087.81.22 1.668.337 2.555.337Z"],[1,"font-medium","text-sm"],[1,"text-xl","font-bold","cursor-pointer",3,"routerLink"],[1,"flex","flex-col","text-gray-heavy","pt-3","w-full"],[1,"flex","flex-col","w-full","items-center","mt-5","px-4","sm:px-10"],[1,"flex","flex-col","w-72","sm:w-full","items-center","justify-center"],[1,"flex","w-full","justify-end","pt-1"],[1,"mt-3"],[1,"flex","w-full","justify-end","my-5"],[1,"text-sm","ml-5",3,"click"],[3,"click"],[1,"text-start","whitespace-pre-wrap","break-words","text-sm","font-normal","font-sans","w-11/12"],[1,"flex","justify-end","font-normal","text-xs","w-11/12","text-gray-hover","cursor-pointer",3,"click"],[1,"flex","w-full","shadow-sm","pl-2","rounded-md","border","border-gray-medium","bg-gray-medium","py-4","gap-1","md:gap-2"],[1,"flex","justify-center","items-start","w-3/12","sm:w-2/12","cursor-pointer",3,"click","routerLink"],["alt","Photo",1,"w-10","h-10","md:w-14","md:h-14","rounded-full","object-cover","shadow-lg",3,"src"],[1,"flex","flex-col","items-start","gap-0.5","w-9/12","sm:w-10/12"],[1,"flex","w-11/12","justify-between"],[1,"text-base","font-semibold","text-gray-heavy","cursor-pointer",3,"click","routerLink"],[1,"text-xs","text-gray-hover","font-semibold"],["contenteditable","true",1,"relative","w-72","sm:w-full","text-base","rounded-lg","bg-gray-medium","mt-2","p-3","outline-none","focus:bg-white","transition","ease-in-out","duration-300",3,"input","keydown"],[1,"flex","w-72","sm:w-full","justify-between"],[1,"h-5","text-orange","mt-1"],[3,"click","disabled"]],template:function(n,i){n&1&&(o(0,"div",1)(1,"div",2)(2,"div",3)(3,"button",4),f("click",function(){return i.closePostDetails()}),w(),o(4,"svg",5),c(5,"path",6),s()(),P(),o(6,"div",7),c(7,"img",8),s(),o(8,"div",9)(9,"div",10)(10,"div",11)(11,"div",12),d(12,ne,2,1)(13,oe,1,3,"app-like-heart",13),o(14,"p",14),m(15),s()(),o(16,"div",15),f("click",function(){return i.onCommentIcon()}),w(),o(17,"svg",16),c(18,"path",17),s(),P(),o(19,"p",14),m(20),s()()(),o(21,"div",18)(22,"p"),m(23),s()()(),o(24,"p",19),m(25),s(),o(26,"div",20),d(27,se,4,1)(28,re,4,4),s()(),o(29,"div",21)(30,"div",22),Q(31,le,12,10,"div",23,ee),d(33,ae,1,0,"app-loading-spinner",24),o(34,"div",25)(35,"button",26),f("click",function(){return i.showComments()}),d(36,pe,2,1),s()(),d(37,Ce,8,6),s()()()()()),n&2&&(r(7),K("src",i.post.imageUrl||"https://divmension-12e561930bc7.s3.amazonaws.com/images/sin-perfil.jpg",E),r(5),u(i.store.user().username?12:13),r(3),v(i.post.likesQuantity),r(5),v(i.post.commentsQuantity),r(3),S("",i.fixedDate(i.post.timeStamp)," Ago"),r(),h("routerLink",V(11,L,i.post.username)),r(),v(i.post.username),r(2),u(i.moreDescription?27:28),r(4),B(i.comments),r(2),u(i.loadingComments?33:-1),r(3),u(i.loadingComments?-1:36),r(),u(i.store.user().username?37:-1))},dependencies:[Z,J,A]})}return t})();export{N as a,Z as b,Le as c};
